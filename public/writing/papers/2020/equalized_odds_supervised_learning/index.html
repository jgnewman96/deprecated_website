<!DOCTYPE html>
<html lang="en-us">

<head>
    
    

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Equality of Opportunity in Supervised Learning</title>
    
    <style>

    html body {
        font-family: 'Ubuntu', sans-serif;
        background-color: azure;
    }

    :root {
        --accent: darkolivegreen;
        --border-width:  5px ;
    }

</style>


<link rel="stylesheet" href="https://judahgnewman.netlify.com/css/main.css">





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu">


 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"> 


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/scala.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/swift.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
    
    <script>hljs.initHighlightingOnLoad();</script>






<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<script>$(document).on('click', function() { $('.collapse').collapse('hide'); })</script>
 <meta name="generator" content="Hugo 0.80.0" />
    

    


    


</head>

<body>
    

    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand visible-xs" href="#">Equality of Opportunity in Supervised Learning</a>
                <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse">
                
                <ul class="nav navbar-nav">
                    
                    <li><a href="/">Home</a></li>
                    
                    <li><a href="/about/">About</a></li>
                    
                    <li><a href="/writing/">Writing</a></li>
                    
                    <li><a href="/reading/">Reading</a></li>
                    
                    <li><a href="/research/">Research</a></li>
                    
                </ul>
                
                
                <ul class="nav navbar-nav navbar-right">
                    
                    <li class="navbar-icon"><a href="mailto:judah.newman@gmail.com"><i class="fa fa-envelope-o"></i></a></li>
                    
                    <li class="navbar-icon"><a href="https://github.com/jgnewman96/"><i class="fa fa-github"></i></a></li>
                    
                    <li class="navbar-icon"><a href="https://www.linkedin.com/in/jgnewman96/"><i class="fa fa-linkedin"></i></a></li>
                    
                </ul>
                
            </div>
        </div>
    </nav>

<main>

    <div>
        <h2>Equality of Opportunity in Supervised Learning</h2>
        <h5></h5>
        <h7 class="section-heading">
            
<a href="https://judahgnewman.netlify.com/tags/machine-learning"><kbd class="item-tag">Machine Learning</kbd></a>

<a href="https://judahgnewman.netlify.com/tags/policy"><kbd class="item-tag">Policy</kbd></a>


<a href="https://judahgnewman.netlify.com/categories/papers"><kbd class="item-category">Papers</kbd></a>

            
            
            
            <br>
            <i class="far fa-clock"></i> Reading Time: 8 minutes
    </div>




    <div align="start" class="content"><h3 id="paper-motivation">Paper Motivation</h3>
<p>Model builders may want to ensure their model is fair with regard to a protected attribute. (E.g. Wanting to make sure our model is not discriminating against people because of their race). Previous research has shown that quantifying a model&rsquo;s fairness is not straight forward. Even if the protected attribute is not an input to the model it is still possible that the model is discriminatory.</p>
<h3 id="paper-contribution">Paper Contribution</h3>
<p>The authors present a methodology of adjusting a learned predictor to remove discrimination according to their definition of discrimination. The authors also investigate their measure of discrimination and highlight what it includes and what it is missing. They find that their notion of fairness both gives more actionable information and facilitates training learners that provide more utility. The authors methodological fix is a post-processing step rather than a wholesale change to the entire learning pipeline which can be quite costly</p>
<h3 id="background">Background</h3>
<p>There is currently a lot of interest in algorithmically measuring and ensuring fairness of machine learning algorithms. There is still however (as of 2016, and 2020 as far as I know!) no vetted methodology for avoiding discrimination in machine learning. The most naive and simple is training the algorithm without the protected attribute. This approach is actually insufficient though because of <strong>redundant encodings</strong>. <strong>redundant encodings</strong> is when the model effectively learns the protected attribute through other features in the dataset.</p>
<p>Another definition of fairness is <strong>demographic parity</strong>. <strong>demographic parity</strong> means the decision of the classifier is independent of the protected attribute. Training classifiers that satisfy <strong>demographic parity</strong> is flawed in two ways according to the authors.</p>
<ol>
<li>It does not ensure fairness.</li>
<li>It also may cripple the utility we hope to achieve</li>
</ol>
<p>The paper assumes the following problem setting. We have a target Y that we are trying to predict using available features X and a protected attribute A</p>
<h3 id="fairness-definition">Fairness Definition</h3>
<p><strong>equalized odds</strong>: A predictor satisfies equalized odds with respect to a protected attribute if the predictor and the attribute are independent conditional on the outcome</p>
<ul>
<li>Our predictor can depend on the protected attribute but only through the actual outcomes.</li>
<li>We must have equal true positive rates and false positive rates across classes in our protected attribute</li>
<li>This definition punishes classifiers which only perform well for certain groups of the protected attribute</li>
</ul>
<p><strong>equal opportunity</strong> is a relaxed notion of equalized odds using the idea of a preferred outcome. If there is a preferred outcome, (getting a loan), then we only require parity for the preferred outcome.</p>
<ul>
<li>This is a weaker definition then equalized odds but still an interesting one because it allows for a more accurate model</li>
</ul>
<p><strong>oblivious</strong>: A measure is oblivious if it only depends on the joint distribution of the true outcome Y the protected attribute A and the classifier
- An oblivious measure narrows the scope of different things to focus on when dealing with fairness. <sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<h3 id="how-do-we-achieve-equalized-odds">How do we achieve equalized odds</h3>
<p>Equalized odds can be achieved through a post training correction that does not require changing the entire training pipeline. Using equalized odds we cant set up our problem via constrained optimization. We want to find the predictor that minimizes l2 loss while satisfying our fairness constraint. We want to minimize our loss subject to the constraint that the true positive and the false positive rates are equal.</p>
<p>The authors proof that this problem can be combined into one linear program the depends solely on the measures accessible to an oblivious measure. The authors also prove a method for achieve the same fairness guarantee when using a classifier that outputs a score rather than a prediction. The authors use the ROC curve, which depends on the false positive and the true positive rate to do so.The prove shows that the ROC curve must lie in a specific plane where every point on the plane meets our constraint.If we do so then any cutoff we choose to use as our final classification will satisfy our fairness constraint. While their solution is no longer a linear program it can still be solved numerically using ternary search</p>
<p>The authors also prove that a non-discriminating bayes optimal classifier can be derived from the Bayes optimal regressor. We can find a closed solution for how much worse the optimal solution that satisfies the constraint is than original optimal regressor.</p>
<h3 id="do-oblivious-measures-actually-get-rid-of-discrimination">Do oblivious measures actually get rid of discrimination?</h3>
<p>The authors introduce two scenarios that could be very different in terms of fairness but both met their definition of equalized odds.</p>
<p>Scenario 1: We have a feature X1 (great great grandfather&rsquo;s profession) that is highly correlated with the protected attribute. It is independent from the target but the protected attribute is correlated with the target. There is a second value X2 (criminal history in justice situations) which is only correlated to the protected attribute through the target variable.</p>
<ul>
<li>A classifier that would be fair here would only depend on X2 and not X1</li>
<li>A more accurate classifier would take into account X1 but this would not meet our measure of fairness</li>
</ul>
<p>Scenario 2: We have a variable X3 (wealth) which is correlated with our protected attribute and predictive of our target.</p>
<ul>
<li>Using X3 in our model may or may not be seen fair discriminatory but by our measure it would be considered as unfair. We can correct our model to be one that uses X3 but does satisfy equalized odds</li>
</ul>
<p>The two scenarios above seem fairly different. The difference in these scenarios is not picked up by equalized odds. Both models would satisfy equalized odds. These two scenarios are actually indistinguishable using any oblivious test. The authors prove this by creating a proof that follows the two scenarios they outlined above.</p>
<h3 id="case-study-fico-scores">Case study: FICO Scores</h3>
<p>The authors and the paper with a case study examining different fairness measures in the context of FICO scores with regard to race. FICO scores are used to predict credit worthiness in the US. The five different classifiers looked at are.</p>
<ol>
<li>Max profit: there is no fairness constraint</li>
<li>Race blind: The threshold for determining a loan is the same for each group</li>
<li>Demographic parity: A threshold is determined for each group so that the same percentage in each group is above the cutoff</li>
<li>Equal opportunity: The fraction of non-defaulting group members that qualify for the loans is the same</li>
<li>Equalized odds: The fraction of non-defaulters and the fraction of defaulters that qualify for loans is the same across each group</li>
</ol>
<p>Using the authors proposed metrics (equal opportunity and equalized odds) we get a threshold in between max profit / race blind and demographic parity. Under max-profit and race blind situations minorities would have a much harder time qualifying for loans. Under demographic parity the opposite would be true</p>
<h3 id="conclusion">Conclusion</h3>
<p>The authors argue that a better path forward is to measure unfairness rather than proving fairness. Proving fairness is very difficult and there will always be certain things we miss.</p>
<p>Requiring certain fairness constraints can force the model builder to collect better data rather than relying on protected attributes</p>
<h2 id="my-closing-thoughts">My Closing Thoughts</h2>
<p>After finishing the paper realized I was still a little unsure about how to implement the post-processing adjustment. The paper could have benefitted from clearly identifying what the adjustment is and how people could make that adjustment. After going back through the paper I understand how to set up the optimization problem after we have trained a classifier. But more explicitly taking the reader through these steps would make it easier for practitioners to adopt this approach.</p>
<p>I find that papers are stronger when proofs are in the appendix. It makes the main body of the paper readable and allows more detail in the proofs. This switch might have also helped clear up some of the confusion I faced on initial read.</p>
<p>It seems that since this paper was published the community has agreed we need stronger definitions of fairness and that a post-processing step is not enough. The authors of this paper call out as much in the body of the paper. But we also do not want to kill the good for the sake of the perfect. Would it be great if most practitioners adopted this approach? 100%. That would require building this approach into packages and making it easier for people to do.</p>
<p>I really appreciate framing fairness as a constrained optimization problem. We want to find the best classifier while still maintaining fairness. Once we have identified it as a constrained optimization problem it is easier to identify what tools to use and which mental frameworks are helpful. This problem framework is what I found to be the most compelling part of the paper.</p>
<p>I really appreciated the part in the conclusion about measuring unfairness rather than proving fairness. Fairness is not some binary. A model is not either fair or unfair. It will have some amount of unfairness. Measuring that unfairness and where it is coming from seems to be the most helpful path moving forward. So that leaves the question. What are the sources of unfairness and how do we measure them?</p>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>Narrowing of scope in such a way is both instrumental and limiting. It makes the problem more tractable and easy to wrap our head around one part of it. But it also means any solution we have is incomplete. The authors mention as much later in the paper. <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>
</div>

    <script src="https://utteranc.es/client.js" repo="jgnewman96/website" issue-term="title" theme="github-light"
    crossorigin="anonymous" async>
    </script>


</main>





<footer>
    <p class="copyright text-muted">
        © 2019 - 2020 Judah Newman,  All opinions are my own. Theme adopted from <a href="https://themes.gohugo.io/minimal/">Minimal</a>. Powered by <a href="https://gohugo.io">Hugo</a>
    </p>
</footer>



</body>


</html>